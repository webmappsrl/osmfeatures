{
    "openapi": "3.0.0",
    "info": {
        "title": "OSM features API",
        "description": "The OSM Features API provides a comprehensive suite of endpoints for accessing OpenStreetMap (OSM) features in GeoJSON format, designed to streamline the integration and utilization of OSM data in applications. By leveraging daily syncs from the OSM database through osm2pgsql imports, the API ensures the delivery of up-to-date and efficiently processed data. Endpoints include retrieving lists and specific details of Places, Administrative Areas, Hiking Routes, and Poles, each identifiable by unique osmfeatures IDs and accompanied by their latest update timestamps. The API allows for fetching single items or lists, providing data in GeoJSON format. Every endpoint is provided with detailed descriptions, parameters and responses.",
        "contact": {
            "email": "info@webmapp.it"
        },
        "version": "1.0.0"
    },
    "paths": {
        "/api/v1/features/admin-areas/list": {
            "get": {
                "tags": ["API V1"],
                "summary": "List all Admin Areas",
                "description": "Returns a list of Admin Areas with their details. Optionally, provide an 'updated_at' parameter to filter areas updated after the specified date. Paginated results are available, with each page containing 100 areas. Use the 'page' parameter to specify the page number to retrieve.",
                "operationId": "listAdminAreas",
                "parameters": [
                    {
                        "name": "updated_at",
                        "in": "query",
                        "description": "Admin Area updated after this date. Example parameter = 2021-01-01T00:00:00Z",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Page number to retrieve. Each page contains 100 results. Example parameter = 6",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "bbox",
                        "in": "query",
                        "description": "Bounding box to filter Admin Areas by. Example parameter(Italy bounding box) = [6.7499552751, 36.619987291, 18.4802470232, 47.1153931748]",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "id": {
                                        "type": "integer",
                                        "description": "Osmfeatures ID of the area"
                                    },
                                    "updated_at": {
                                        "type": "string",
                                        "format": "date-time",
                                        "description": "When the admin area was last updated in OSM, in ISO 8601 format."
                                    },
                                    "type": "object",
                                    "example": {
                                        "id": 123456,
                                        "updated_at": "2021-01-01T00:00:00Z"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/features/admin-areas/{id}": {
            "get": {
                "tags": ["API V1"],
                "summary": "Get Admin Area by ID",
                "description": "Returns a single Admin Area in GeoJSON format",
                "operationId": "getAdminAreaById",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Admin Area ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "type": {
                                            "type": "string",
                                            "description": "Type of the GeoJSON object"
                                        },
                                        "properties": {
                                            "properties": {
                                                "osm_type": {
                                                    "type": "string",
                                                    "description": "Type of the OSM object (N, W, R)"
                                                },
                                                "osm_id": {
                                                    "type": "integer",
                                                    "description": "ID of the OSM object"
                                                },
                                                "id": {
                                                    "type": "integer",
                                                    "description": "Osmfeatures ID of the area"
                                                },
                                                "updated_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "description": "When the area was last updated in OSM, in ISO 8601 format."
                                                },
                                                "name": {
                                                    "type": "string",
                                                    "description": "Name of the area"
                                                },
                                                "admin_level": {
                                                    "type": "string",
                                                    "description": "Administrative level of the area"
                                                },
                                                "osm_url": {
                                                    "type": "string",
                                                    "description": "URL to the OSM API for the object"
                                                },
                                                "osm_tags": {
                                                    "type": "json",
                                                    "description": "OSM tags of the object"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "geometry": {
                                            "type": "geojson",
                                            "description": "Geometry of the area in GeoJSON format"
                                        }
                                    },
                                    "type": "object",
                                    "example": {
                                        "type": "Feature",
                                        "properties": {
                                            "osm_type": "R",
                                            "osm_id": 123456,
                                            "id": 123456,
                                            "updated_at": "2021-01-01T00:00:00Z",
                                            "name": "Admin Area",
                                            "admin_level": "6",
                                            "osm_url": "https://www.openstreetmap.org/relation/123456",
                                            "osm_tags": {
                                                "type": "boundary",
                                                "boundary": "administrative"
                                            }
                                        },
                                        "geometry": {
                                            "type": "Polygon",
                                            "coordinates": [
                                                [
                                                    [100.0, 0.0],
                                                    [101.0, 0.0],
                                                    [101.0, 1.0],
                                                    [100.0, 1.0],
                                                    [100.0, 0.0]
                                                ]
                                            ]
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Admin Area not found"
                    }
                }
            }
        },
        "/api/v1/features/places/list": {
            "get": {
                "tags": ["API V1"],
                "summary": "List all Places",
                "description": "Returns a list of Places with their IDs and updated timestamps. Optionally provide an 'updated_at' parameter to filter places updated after the specified date. Paginated results are available, with each page containing 100 places. Use the 'page' parameter to specify the page number to retrieve.",
                "operationId": "listPlaces",
                "parameters": [
                    {
                        "name": "updated_at",
                        "in": "query",
                        "description": "Places updated after this date. Example parameter = 2021-01-01T00:00:00Z",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Page number to retrieve. Each page contains 100 results. Example parameter = 6",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "bbox",
                        "in": "query",
                        "description": "Bounding box to filter Places by. Example parameter(Italy bounding box) = [6.7499552751, 36.619987291, 18.4802470232, 47.1153931748]",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "id": {
                                        "type": "integer",
                                        "description": "Osmfeatures ID of the place"
                                    },
                                    "updated_at": {
                                        "type": "string",
                                        "format": "date-time",
                                        "description": "When the place was last updated in OSM, in ISO 8601 format."
                                    },
                                    "type": "object",
                                    "example": {
                                        "id": 123456,
                                        "updated_at": "2021-01-01T00:00:00Z"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/features/places/{id}": {
            "get": {
                "tags": ["API V1"],
                "summary": "Get Place by ID",
                "description": "Returns a single Place in GeoJSON format",
                "operationId": "getPlaceById",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Place ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "type": {
                                            "type": "string",
                                            "description": "Type of the GeoJSON object"
                                        },
                                        "properties": {
                                            "properties": {
                                                "osm_type": {
                                                    "type": "string",
                                                    "description": "Type of the OSM object (N, W, R)"
                                                },
                                                "osm_id": {
                                                    "type": "integer",
                                                    "description": "ID of the OSM object"
                                                },
                                                "id": {
                                                    "type": "integer",
                                                    "description": "Osmfeatures ID of the place"
                                                },
                                                "updated_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "description": "When the place was last updated in OSM, in ISO 8601 format."
                                                },
                                                "name": {
                                                    "type": "string",
                                                    "description": "Name of the place"
                                                },
                                                "class": {
                                                    "type": "string",
                                                    "description": "Class of the place"
                                                },
                                                "subclass": {
                                                    "type": "string",
                                                    "description": "Subclass of the place"
                                                },
                                                "elevation": {
                                                    "type": "number",
                                                    "description": "Elevation of the place in meters"
                                                },
                                                "osm_url": {
                                                    "type": "string",
                                                    "description": "URL to the OSM API for the object"
                                                },
                                                "osm_tags": {
                                                    "type": "json",
                                                    "description": "OSM tags of the object"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "geometry": {
                                            "type": "geojson",
                                            "description": "Geometry of the place in GeoJSON format"
                                        }
                                    },
                                    "type": "object",
                                    "example": {
                                        "type": "Feature",
                                        "properties": {
                                            "osm_type": "N",
                                            "osm_id": 123456,
                                            "id": 123456,
                                            "updated_at": "2021-01-01T00:00:00Z",
                                            "name": "Place",
                                            "class": "amenity",
                                            "subclass": "restaurant",
                                            "elevation": 1000,
                                            "osm_url": "https://www.openstreetmap.org/node/123456",
                                            "osm_tags": {
                                                "amenity": "restaurant"
                                            }
                                        },
                                        "geometry": {
                                            "type": "Point",
                                            "coordinates": [100.0, 0.0]
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Place not found"
                    }
                }
            }
        },
        "/api/v1/features/hiking-routes/list": {
            "get": {
                "tags": ["API V1"],
                "summary": "List all Hiking Routes",
                "description": "Returns a list of Hiking Routes with their details. Optionally, provide an 'updated_at' parameter to filter routes updated after the specified date. Paginated results are available, with each page containing 100 routes. Use the 'page' parameter to specify the page number to retrieve.",
                "operationId": "listHikingRoutes",
                "parameters": [
                    {
                        "name": "updated_at",
                        "in": "query",
                        "description": "Hiking Routes updated after this date. Example parameter = 2021-01-01T00:00:00Z",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Page number to retrieve. Each page contains 100 results. Example parameter = 6",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "bbox",
                        "in": "query",
                        "description": "Bounding box to filter Hiking Routes by. Example parameter(Italy bounding box) = [6.7499552751, 36.619987291, 18.4802470232, 47.1153931748]",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "id": {
                                        "type": "integer",
                                        "description": "Osmfeatures ID of the hiking route"
                                    },
                                    "updated_at": {
                                        "type": "string",
                                        "format": "date-time",
                                        "description": "When the hiking route was last updated in OSM, in ISO 8601 format."
                                    },
                                    "type": "object",
                                    "example": {
                                        "id": 123456,
                                        "updated_at": "2021-01-01T00:00:00Z"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/features/hiking-routes/{id}": {
            "get": {
                "tags": ["API V1"],
                "summary": "Get Hiking Routes by ID",
                "description": "Returns a single Hiking Route in GeoJSON format",
                "operationId": "getHikingRouteById",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Hiking Route ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Return the Geojson Feature of the Hiking Route",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "type": {
                                            "type": "string",
                                            "description": "Type of the GeoJSON object"
                                        },
                                        "properties": {
                                            "properties": {
                                                "osm_type": {
                                                    "type": "string",
                                                    "description": "Type of the OSM object (N, W, R)"
                                                },
                                                "osm_id": {
                                                    "type": "integer",
                                                    "description": "ID of the OSM object"
                                                },
                                                "id": {
                                                    "type": "integer",
                                                    "description": "Osmfeatures ID of the route"
                                                },
                                                "updated_at_osm": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "description": "When the route was last updated in OSM, in ISO 8601 format"
                                                },
                                                "updated_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "description": "When the route was last updated in osmfeatures, in ISO 8601 format. This data is computed by calculating the most recent updated_at of the members hiking route"
                                                },
                                                "name": {
                                                    "type": "string",
                                                    "description": "Name of the route"
                                                },

                                                "cai_scale": {
                                                    "type": "string",
                                                    "description": "Difficulty level 'E' indicating easy trails suitable for most hikers."
                                                },
                                                "osm2cai_status": {
                                                    "type": "integer",
                                                    "description": "Score calculated based on cai survey and cai scale presence in osm tags. If both are present, the score is 3. If only Cai Survey is present, the score is 2. If only Cai Scale is present, the score is 1. If neither are present, the score is 0."
                                                },
                                                "osmc_symbol": {
                                                    "type": "string",
                                                    "description": "OSMC symbol showing trail marking colors and number."
                                                },
                                                "network": {
                                                    "type": "string",
                                                    "description": "Part of the local walking network."
                                                },
                                                "survey_date": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "description": "Date when the trail survey was conducted."
                                                },
                                                "roundtrip": {
                                                    "type": "boolean",
                                                    "description": "Indicates if the route is a roundtrip."
                                                },
                                                "symbol": {
                                                    "type": "string",
                                                    "description": "Symbol used to mark the trail."
                                                },
                                                "symbol_it": {
                                                    "type": "string",
                                                    "description": "Italian symbol marking the trail."
                                                },
                                                "ascent": {
                                                    "type": "integer",
                                                    "description": "Total ascent of the trail in meters."
                                                },
                                                "descent": {
                                                    "type": "integer",
                                                    "description": "Total descent of the trail in meters."
                                                },
                                                "distance": {
                                                    "type": "number",
                                                    "description": "Length of the trail in kilometers."
                                                },
                                                "duration_forward": {
                                                    "type": "string",
                                                    "description": "Estimated time to complete the trail forward."
                                                },
                                                "duration_backward": {
                                                    "type": "string",
                                                    "description": "Estimated time to complete the trail backward."
                                                },
                                                "from": {
                                                    "type": "string",
                                                    "description": "Starting point of the trail."
                                                },
                                                "to": {
                                                    "type": "string",
                                                    "description": "Ending point of the trail."
                                                },
                                                "rwn_name": {
                                                    "type": "string",
                                                    "description": "Name in the regional walking network."
                                                },
                                                "ref_REI": {
                                                    "type": "string",
                                                    "description": "Reference number in the Italian Excursionist Network."
                                                },
                                                "maintenance": {
                                                    "type": "string",
                                                    "description": "Information about trail maintenance."
                                                },
                                                "maintenance_it": {
                                                    "type": "string",
                                                    "description": "Maintenance information in Italian."
                                                },
                                                "operator": {
                                                    "type": "string",
                                                    "description": "Organization responsible for the trail."
                                                },
                                                "state": {
                                                    "type": "string",
                                                    "description": "Current condition or status of the trail."
                                                },
                                                "ref": {
                                                    "type": "string",
                                                    "description": "Reference number of the trail."
                                                },
                                                "source": {
                                                    "type": "string",
                                                    "description": "Trail information obtained from CAI survey."
                                                },
                                                "source_ref": {
                                                    "type": "string",
                                                    "description": "Reference source for trail information."
                                                },
                                                "note": {
                                                    "type": "string",
                                                    "description": "Additional notes regarding the trail."
                                                },
                                                "note_it": {
                                                    "type": "string",
                                                    "description": "Notes in Italian regarding the trail."
                                                },
                                                "old_ref": {
                                                    "type": "string",
                                                    "description": "Previous reference number of the trail."
                                                },
                                                "note_project_page": {
                                                    "type": "string",
                                                    "description": "Project page notes related to the trail."
                                                },
                                                "website": {
                                                    "type": "string",
                                                    "description": "Website with more information about the trail."
                                                },
                                                "wikimedia_commons": {
                                                    "type": "string",
                                                    "description": "Wikimedia Commons link for the trail."
                                                },
                                                "description": {
                                                    "type": "string",
                                                    "description": "Description of the trail."
                                                },
                                                "description_it": {
                                                    "type": "string",
                                                    "description": "Description of the trail in Italian."
                                                },
                                                "members": {
                                                    "type": "array",
                                                    "description": "Data about trail members or segments."
                                                },

                                                "osm_url": {
                                                    "type": "string",
                                                    "description": "URL to the OSM API for the object"
                                                },
                                                "osm_tags": {
                                                    "type": "json",
                                                    "description": "OSM tags of the object"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "geometry": {
                                            "type": "geojson",
                                            "description": "Geometry of the area in GeoJSON format"
                                        }
                                    },
                                    "type": "object",
                                    "example": {
                                        "type": "Feature",
                                        "properties": {
                                            "osm_type": "R",
                                            "osm_id": 123456,
                                            "id": 123456,
                                            "updated_at": "2021-01-01T00:00:00Z",
                                            "name": "Hiking Route",
                                            "admin_level": "6",
                                            "osm_url": "https://www.openstreetmap.org/relation/123456",
                                            "osm_tags": {
                                                "type": "route",
                                                "route": "hiking"
                                            }
                                        },
                                        "geometry": {
                                            "type": "LineString",
                                            "coordinates": [
                                                [100.0, 0.0],
                                                [101.0, 1.0]
                                            ]
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Hiking Route not found"
                    }
                }
            }
        },
        "/api/v1/features/poles/list": {
            "get": {
                "tags": ["API V1"],
                "summary": "List all Poles",
                "description": "Returns a list of Poles with their IDs and updated timestamps. Optionally provide an 'updated_at' parameter to filter poles updated after the specified date. Paginated results are available, with each page containing 100 poles. Use the 'page' parameter to specify the page number to retrieve.",
                "operationId": "listPoles",
                "parameters": [
                    {
                        "name": "updated_at",
                        "in": "query",
                        "description": "Poles updated after this date. Example parameter = 2021-01-01T00:00:00Z",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Page number to retrieve. Each page contains 100 results. Example parameter = 6",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "bbox",
                        "in": "query",
                        "description": "Bounding box to filter Poles by. Example parameter(Italy bounding box)= [6.7499552751, 36.619987291, 18.4802470232, 47.1153931748]",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "id": {
                                        "type": "integer",
                                        "description": "Osmfeatures ID of the pole"
                                    },
                                    "updated_at": {
                                        "type": "string",
                                        "format": "date-time",
                                        "description": "When the pole was last updated in OSM, in ISO 8601 format."
                                    },
                                    "type": "object",
                                    "example": {
                                        "id": 123456,
                                        "updated_at": "2021-01-01T00:00:00Z"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/features/poles/{id}": {
            "get": {
                "tags": ["API V1"],
                "summary": "Get Pole by ID",
                "description": "Returns a single Pole in GeoJSON format",
                "operationId": "getPoleById",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Pole ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "type": {
                                            "type": "string",
                                            "description": "Type of the GeoJSON object"
                                        },
                                        "properties": {
                                            "properties": {
                                                "osm_type": {
                                                    "type": "string",
                                                    "description": "Type of the OSM object (N, W, R)"
                                                },
                                                "osm_id": {
                                                    "type": "integer",
                                                    "description": "ID of the OSM object"
                                                },
                                                "id": {
                                                    "type": "integer",
                                                    "description": "Osmfeatures ID of the pole"
                                                },
                                                "updated_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "description": "When the pole was last updated in OSM, in ISO 8601 format."
                                                },
                                                "name": {
                                                    "type": "string",
                                                    "description": "Name of the pole"
                                                },
                                                "ref": {
                                                    "type": "string",
                                                    "description": "Reference number of the pole"
                                                },
                                                "ele": {
                                                    "type": "number",
                                                    "description": "Elevation of the pole in meters"
                                                },
                                                "destination": {
                                                    "type": "string",
                                                    "description": "Destination of the pole"
                                                },
                                                "support": {
                                                    "type": "string",
                                                    "description": "Support of the pole"
                                                },
                                                "osm_url": {
                                                    "type": "string",
                                                    "description": "URL to the OSM API for the object"
                                                },
                                                "osm_tags": {
                                                    "type": "json",
                                                    "description": "OSM tags of the object"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "geometry": {
                                            "type": "geojson",
                                            "description": "Geometry of the pole in GeoJSON format"
                                        }
                                    },
                                    "type": "object",
                                    "example": {
                                        "type": "Feature",
                                        "properties": {
                                            "osm_type": "N",
                                            "osm_id": 123456,
                                            "id": 123456,
                                            "updated_at": "2021-01-01T00:00:00Z",
                                            "name": "Pole",
                                            "ref": "123",
                                            "ele": 1000,
                                            "destination": "Destination",
                                            "support": "Support",
                                            "osm_url": "https://www.openstreetmap.org/node/123456",
                                            "osm_tags": {
                                                "amenity": "restaurant"
                                            }
                                        },
                                        "geometry": {
                                            "type": "Point",
                                            "coordinates": [100.0, 0.0]
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Pole not found"
                    }
                }
            }
        }
    }
}
